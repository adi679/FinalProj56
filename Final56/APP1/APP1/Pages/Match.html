<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="../Scripts/jquery-3.4.1.min.js"></script>
    <script src="../Scripts/ajaxCalls.js"></script>
    <script>
        var api_data;
        var all_District
        var show_all_match
        var District
        var email
        var password
        var api_District 
        var data = 1; 
        email = "adi@gmail.com";
        password = "12345";


        //----District-----//

        
       let api = "../api/UsersDistrict/" + email;
             
        //ajaxCall("Get", api, email + "" + password, successDistrict, errorDistrict)

        ajaxCall("Get", api, email, successDistrict, errorDistrict)

        function successDistrict(data) {
            if (data == -1)
                api_District = "";
            else {
                api_District = "school.region_id ="+data+"&"
            }
            District = data


            api_data = "https://api.data.gov/ed/collegescorecard/v1/schools.json?" + api_District + "fields=id, school.name, school.region_id, school.state_fips, school.ownership, school.locale, school.school_url, 2018.student.size, 2018.cost.tuition.out_of_state, 2018.admissions.sat_scores.average.overall & api_key=tcw4YqKbgv55DmuUicwNWeBtGk3XwHzoCf2SbWne"

        }

          $.get(api_data, function (data) {
            console.log(data);
            api_data = data;
            alert('District');
        })

        function errorDistrict(data) {alert("ErrorDistrict") }

        
        //for (var i = 0; i < api_data.length; i++) {
        //    for (var j = 0; j < all_District.length; j++) {
        //        if (api_data[i].District == all_District[j])
        //            api_data=
        //    }


        //-----State----//
            
            let api = "../api/UsersDistrict/"+list_user_States;

        ajaxCall("Get", api, email, successState, errorState)

        function successState(data) {
            if (data == -1)
                api_State = "";
            else {
                api_State = "school.state_fips=" + data + "&"; 
            }
            states = data

            api_data = "https://api.data.gov/ed/collegescorecard/v1/schools.json?"+api_State+"fields=id, school.name, school.region_id, school.state_fips, school.ownership, school.locale, school.school_url, 2018.student.size, 2018.cost.tuition.out_of_state, 2018.admissions.sat_scores.average.overall & api_key=tcw4YqKbgv55DmuUicwNWeBtGk3XwHzoCf2SbWne"

        }

        $.get(api_data, function (data) {
            console.log(data);
            api_data = data;
            alert('States');
        })

        function errorState(data) { alert("ErrorState") }












    </script>
</head>
<body>

</body>
</html>